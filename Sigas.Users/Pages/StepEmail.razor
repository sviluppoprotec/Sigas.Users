@page "/stepemail"
@using Sigas.Users.Pages;
@inherits Sigas.Users.Classes.SigasBasePage
@inject IHttpClientFactory ClientFactory
@inject NavigationManager NavManager

<h3>Recupero password</h3>
<h4>Inserisci l'email'</h4>

<div class="container">
    <div class="row align-items-start">
        <div class="col-12 col-sm-12 col-md-3 col-lg-3">
            Email
        </div>
        <div class="col-12 col-sm-12 col-md-6 col-lg-6">
            <input type="text" name="email" id="email" @bind="email"/>
        </div>
        <div class="col-12 col-sm-12 col-md-3 col-lg-3">
            <button type="button" @onclick="SendEmail">Invia</button>
        </div>
    </div>
</div>

@code {

    public string email { get; set; } = string.Empty;
    private async void SendEmail()
    {
        var stepEmail = new StepEmailHandler(ClientFactory);
        var mailOk = await stepEmail.SendEmail2(email);

        if (mailOk)
        {
            // invia l'email
        }

        NavManager.NavigateTo("/");
    }
}
